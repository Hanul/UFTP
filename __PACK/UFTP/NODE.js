UFTP.FTP=CLASS(o=>{let i=require("ftp"),n=require("path");return{init:(o,e,r,t)=>{let c=r.host,s=void 0===r.port?21:r.port,a=r.username,l=r.password,d=[],f=[],u=[],F=[],v=[],H=[],S=[],p=[],O=[],T=[],E=[],R=[],m=[],P=e.writeFile=((o,i)=>{d.push({params:o,callbackOrHandlers:i})}),A=e.readFile=((o,i)=>{f.push({path:o,callbackOrHandlers:i})}),h=e.getFileInfo=((o,i)=>{u.push({path:o,callbackOrHandlers:i})}),_=e.copyFile=((o,i)=>{F.push({params:o,callbackOrHandlers:i})}),C=e.moveFile=((o,i)=>{v.push({params:o,callbackOrHandlers:i})}),k=e.removeFile=((o,i)=>{H.push({path:o,callbackOrHandlers:i})}),W=e.checkFileExists=((o,i)=>{S.push({path:o,callback:i})}),b=e.createFolder=((o,i)=>{p.push({path:o,callbackOrHandlers:i})}),I=e.copyFolder=((o,i)=>{O.push({params:o,callbackOrHandlers:i})}),N=e.removeFolder=((o,i)=>{T.push({path:o,callbackOrHandlers:i})}),U=e.checkIsFolder=((o,i)=>{E.push({path:o,callbackOrHandlers:i})}),g=e.findFileNames=((o,i)=>{R.push({path:o,callbackOrHandlers:i})}),G=e.findFolderNames=((o,i)=>{m.push({path:o,callbackOrHandlers:i})}),y=new i;y.on("error",o=>{let i=o.toString();void 0!==t?t(i,r):SHOW_ERROR("UFTP.FTP",i,r)}),y.on("ready",()=>{P=e.writeFile=((o,i)=>{let e=o.path,r=o.content,t=o.buffer;void 0!==r&&(t=Buffer.from(r,"utf8"));let c,s;void 0!==i&&(CHECK_IS_DATA(i)!==!0?s=i:(c=i.error,s=i.success));let a=n.dirname(e);b(a,{error:o=>{void 0!==c?c(o,a):SHOW_ERROR("UFTP.FTP/writeFile",o,a)},success:()=>{y.put(t,e,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==c?c(n,o):SHOW_ERROR("UFTP.FTP/writeFile",n,o)}else void 0!==s&&s()})}})}),A=e.readFile=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),W(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/readFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):y.get(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/readFile",n,o)}else{let i=[];n.on("data",o=>{i.push(o)}),n.on("end",()=>{r(Buffer.concat(i))}),n.on("error",i=>{let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/readFile",n,o)})}})})}),h=e.getFileInfo=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success));let t=o.substring(0,o.lastIndexOf("/")),c=o.substring(o.lastIndexOf("/")+1);y.list(t,(i,t)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/getFileInfo",n,o)}else{let i;EACH(t,o=>{o.name===c&&(i={lastUpdateTime:o.date},"d"!==o.type&&(i.size=o.size))}),void 0===i?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/getFileInfo",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):r(i)}})}),_=e.copyFile=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),A(t,{error:o=>{void 0!==e?e(o,t):SHOW_ERROR("UFTP.FTP/copyFile",o,t)},notExists:()=>{void 0!==n?n(t):SHOW_WARNING("UFTP.FTP/copyFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:t})},success:o=>{P({path:c,buffer:o},{error:o=>{void 0!==e?e(o,c):SHOW_ERROR("UFTP.FTP/copyFile",o,c)},success:r})}})}),C=e.moveFile=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),W(t,i=>{i!==!0?void 0!==n?n(t):SHOW_WARNING("UFTP.FTP/moveFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:t}):y.rename(t,c,i=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/moveFile",n,o)}else void 0!==r&&r()})})}),k=e.removeFile=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),W(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/removeFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):y.delete(o,i=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/removeFile",n,o)}else void 0!==r&&r()})})}),W=e.checkFileExists=((o,i)=>{if("."===o)i(!0);else{let n=o.substring(0,o.lastIndexOf("/")),e=o.substring(o.lastIndexOf("/")+1);y.list(n,(o,n)=>{let r=!1;void 0===o&&EACH(n,o=>{if(o.name===e)return r=!0,!1}),void 0!==i&&i(r)})}}),b=e.createFolder=((o,i)=>{let n,e;void 0!==i&&(CHECK_IS_DATA(i)!==!0?e=i:(n=i.error,e=i.success)),y.mkdir(o,!0,i=>{if(void 0!==i){let e=i.toString();void 0!==n?n(e,o):SHOW_ERROR("UFTP.FTP/createFolder",e,o)}else void 0!==e&&e()})}),I=e.copyFolder=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),W(t,i=>{i!==!0?void 0!==n?n(t):SHOW_WARNING("UFTP.FTP/copyFolder",MSG({ko:"폴더가 존재하지 않습니다."}),{from:t}):y.list(t,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/copyFolder",n,o)}else b(c,{error:e,success:()=>{NEXT(n,[(o,i)=>{"d"===o.type?I({from:t+"/"+o.name,to:c+"/"+o.name},{error:e,success:i}):_({from:t+"/"+o.name,to:c+"/"+o.name},{error:e,success:i})},()=>{return()=>{void 0!==r&&r()}}])}})})})}),N=e.removeFolder=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),W(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/removeFolder",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):y.rmdir(o,!0,i=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/removeFolder",n,o)}else void 0!==r&&r()})})}),U=e.checkIsFolder=((o,i)=>{let n,e;void 0!==i&&(CHECK_IS_DATA(i)!==!0?e=i:(n=i.error,e=i.success));let r=o.substring(0,o.lastIndexOf("/")),t=o.substring(o.lastIndexOf("/")+1);y.list(r,(o,i)=>{if(void 0!==o)e(!1);else{let o=!1;EACH(i,i=>{i.name===t&&(o="d"===i.type)}),e(o)}})}),g=e.findFileNames=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success));let t=[];W(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/findFileNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):y.list(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/findFileNames",n,o)}else EACH(n,o=>{"d"!==o.type&&t.push(o.name)}),void 0!==r&&r(t)})})}),G=e.findFolderNames=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success));let t=[];W(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/findFolderNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):y.list(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/findFolderNames",n,o)}else EACH(n,o=>{"d"===o.type&&t.push(o.name)}),void 0!==r&&r(t)})})}),EACH(d,o=>{P(o.params,o.callbackOrHandlers)}),d=void 0,EACH(f,o=>{A(o.path,o.callbackOrHandlers)}),f=void 0,EACH(u,o=>{h(o.path,o.callbackOrHandlers)}),u=void 0,EACH(F,o=>{_(o.params,o.callbackOrHandlers)}),F=void 0,EACH(v,o=>{C(o.params,o.callbackOrHandlers)}),v=void 0,EACH(H,o=>{k(o.path,o.callbackOrHandlers)}),H=void 0,EACH(S,o=>{W(o.path,o.callback)}),S=void 0,EACH(p,o=>{b(o.path,o.callbackOrHandlers)}),p=void 0,EACH(O,o=>{I(o.params,o.callbackOrHandlers)}),O=void 0,EACH(T,o=>{N(o.path,o.callbackOrHandlers)}),T=void 0,EACH(E,o=>{U(o.path,o.callbackOrHandlers)}),E=void 0,EACH(R,o=>{g(o.path,o.callbackOrHandlers)}),R=void 0,EACH(m,o=>{G(o.path,o.callbackOrHandlers)}),m=void 0}),y.connect({host:c,port:s,user:a,password:l});e.disconnect=(()=>{y.end()})}}}),UFTP.SFTP=CLASS(o=>{let i=require("ssh2").Client,n=require("path");return{init:(o,e,r,t)=>{let c=r.host,s=void 0===r.port?22:r.port,a=r.username,l=r.password,d=r.privateKey,f=[],u=[],F=[],v=[],H=[],S=[],p=[],O=[],T=[],E=[],R=[],m=[],P=[],A=e.writeFile=((o,i)=>{f.push({params:o,callbackOrHandlers:i})}),h=e.readFile=((o,i)=>{u.push({path:o,callbackOrHandlers:i})}),_=e.getFileInfo=((o,i)=>{F.push({path:o,callbackOrHandlers:i})}),C=e.copyFile=((o,i)=>{v.push({params:o,callbackOrHandlers:i})}),k=e.moveFile=((o,i)=>{H.push({params:o,callbackOrHandlers:i})}),W=e.removeFile=((o,i)=>{S.push({path:o,callbackOrHandlers:i})}),b=e.checkFileExists=((o,i)=>{p.push({path:o,callback:i})}),I=e.createFolder=((o,i)=>{O.push({path:o,callbackOrHandlers:i})}),N=e.copyFolder=((o,i)=>{T.push({params:o,callbackOrHandlers:i})}),U=e.removeFolder=((o,i)=>{E.push({path:o,callbackOrHandlers:i})}),g=e.checkIsFolder=((o,i)=>{R.push({path:o,callbackOrHandlers:i})}),G=e.findFileNames=((o,i)=>{m.push({path:o,callbackOrHandlers:i})}),y=e.findFolderNames=((o,i)=>{P.push({path:o,callbackOrHandlers:i})}),D=new i;D.on("error",o=>{let i=o.toString();void 0!==t?t(i,r):SHOW_ERROR("UFTP.FTP",i,r)}),D.on("ready",()=>{D.sftp((o,i)=>{if(void 0!==o){let i=o.toString();void 0!==t?t(i,r):SHOW_ERROR("UFTP.SFTP",i,r)}else A=e.writeFile=((o,e)=>{let r=o.path,t=o.content,c=o.buffer;void 0!==t&&(c=Buffer.from(t,"utf8"));let s,a;void 0!==e&&(CHECK_IS_DATA(e)!==!0?a=e:(s=e.error,a=e.success));let l=n.dirname(r);I(l,{error:o=>{void 0!==s?s(o,l):SHOW_ERROR("UFTP.SFTP/writeFile",o,l)},success:()=>{i.open(r,"w",(o,n)=>{if(void 0!==o){let i=o.toString();void 0!==s?s(i,r):SHOW_ERROR("UFTP.SFTP/writeFile",i,r)}else{let o,e=c.byteLength,t=16384,l=0,d=(t,c)=>{if(void 0!==t){o=!0,i.close(n);let e=t.toString();void 0!==s?s(e,r):SHOW_ERROR("UFTP.SFTP/writeFile",e,r)}else c===e&&(void 0!==a&&a(),i.close(n))};if(0===e)i.write(n,c,0,0,0,d);else for(;l<e&&o!==!0;)l+t>e&&(t=e-l),i.write(n,c,l,t,l,d),l+=t}})}})}),h=e.readFile=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),b(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/readFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):i.open(o,"r",(n,e)=>{if(void 0!==n){let i=n.toString();void 0!==r?r(i,o):SHOW_ERROR("UFTP.SFTP/readFile",i,o)}else i.fstat(e,(n,c)=>{if(void 0!==n){let i=n.toString();void 0!==r?r(i,o):SHOW_ERROR("UFTP.SFTP/readFile",i,o)}else{let n,s=[],a=c.size,l=16384,d=new Buffer(a),f=0,u=0,F=(c,l,d)=>{if(void 0!==c){n=!0,i.close(e);let t=c.toString();void 0!==r?r(t,o):SHOW_ERROR("UFTP.SFTP/readFile",t,o)}else u+=l,s.push(d),u===a&&(t(Buffer.concat(s)),i.close(e))};if(0===a)t(Buffer.concat(s)),i.close(e);else for(;f<a&&n!==!0;)f+l>a&&(l=a-f),i.read(e,d,f,l,f,F),f+=l}})})})}),_=e.getFileInfo=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),i.stat(o,(i,n)=>{if(void 0!==i)void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/getFileInfo",MSG({ko:"파일이 존재하지 않습니다."}),{path:o});else{let o={lastUpdateTime:new Date(1e3*n.mtime)};n.isDirectory()!==!0&&(o.size=n.size),t(o)}})}),C=e.copyFile=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),h(t,{error:o=>{void 0!==e?e(o,t):SHOW_ERROR("UFTP.SFTP/copyFile",o,t)},notExists:()=>{void 0!==n?n(t):SHOW_WARNING("UFTP.SFTP/copyFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:t})},success:o=>{A({path:c,buffer:o},{error:o=>{void 0!==e?e(o,c):SHOW_ERROR("UFTP.SFTP/copyFile",o,c)},success:r})}})}),k=e.moveFile=((o,n)=>{let e,r,t,c=o.from,s=o.to;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),b(c,n=>{n!==!0?void 0!==e?e(c):SHOW_WARNING("UFTP.SFTP/moveFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:c}):i.rename(c,s,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/moveFile",n,o)}else void 0!==t&&t()})})}),W=e.removeFile=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),b(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/removeFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):i.unlink(o,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/removeFile",n,o)}else void 0!==t&&t()})})}),b=e.checkFileExists=((o,n)=>{i.stat(o,o=>{n(void 0===o)})}),I=e.createFolder=((o,e)=>{let r,t;void 0!==e&&(CHECK_IS_DATA(e)!==!0?t=e:(r=e.error,t=e.success)),b(o,e=>{if(e!==!0){let e=n.dirname(o);b(e,n=>{NEXT([o=>{n!==!0?I(e,o):o()},()=>{return()=>{i.mkdir(o,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/createFolder",n,o)}else void 0!==t&&t()})}}])})}else void 0!==t&&t()})}),N=e.copyFolder=((o,n)=>{let e,r,t,c=o.from,s=o.to;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),b(c,n=>{n!==!0?void 0!==e?e(c):SHOW_WARNING("UFTP.SFTP/copyFolder",MSG({ko:"폴더가 존재하지 않습니다."}),{from:c}):i.readdir(c,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/copyFolder",n,o)}else I(s,{error:r,success:()=>{NEXT(n,[(o,i)=>{o.attrs.isDirectory()===!0?N({from:c+"/"+o.filename,to:s+"/"+o.filename},{error:r,success:i}):C({from:c+"/"+o.filename,to:s+"/"+o.filename},{error:r,success:i})},()=>{return()=>{void 0!==t&&t()}}])}})})})}),U=e.removeFolder=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),b(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/removeFolder",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):i.readdir(o,(n,e)=>{if(void 0!==n){let i=n.toString();void 0!==r?r(i,o):SHOW_ERROR("UFTP.SFTP/removeFolder",i,o)}else NEXT(e,[(i,e)=>{i.attrs.isDirectory()===!0?U(o+"/"+i.filename,{error:n,success:e}):W(o+"/"+i.filename,{error:n,success:e})},()=>{return()=>{i.rmdir(o,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/removeFolder",n,o)}else void 0!==t&&t()})}}])})})}),g=e.checkIsFolder=((o,n)=>{let e,r;void 0!==n&&(CHECK_IS_DATA(n)!==!0?r=n:(e=n.error,r=n.success)),i.stat(o,(o,i)=>{r(void 0!==o?!1:i.isDirectory())})}),G=e.findFileNames=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success));let c=[];b(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/findFileNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):i.readdir(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/findFileNames",n,o)}else EACH(n,o=>{o.attrs.isDirectory()!==!0&&c.push(o.filename)}),void 0!==t&&t(c)})})}),y=e.findFolderNames=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success));let c=[];b(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/findFolderNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):i.readdir(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/findFolderNames",n,o)}else EACH(n,o=>{o.attrs.isDirectory()===!0&&c.push(o.filename)}),void 0!==t&&t(c)})})}),EACH(f,o=>{A(o.params,o.callbackOrHandlers)}),f=void 0,EACH(u,o=>{h(o.path,o.callbackOrHandlers)}),u=void 0,EACH(F,o=>{_(o.path,o.callbackOrHandlers)}),F=void 0,EACH(v,o=>{C(o.params,o.callbackOrHandlers)}),v=void 0,EACH(H,o=>{k(o.params,o.callbackOrHandlers)}),H=void 0,EACH(S,o=>{W(o.path,o.callbackOrHandlers)}),S=void 0,EACH(p,o=>{b(o.path,o.callback)}),p=void 0,EACH(O,o=>{I(o.path,o.callbackOrHandlers)}),O=void 0,EACH(T,o=>{N(o.params,o.callbackOrHandlers)}),T=void 0,EACH(E,o=>{U(o.path,o.callbackOrHandlers)}),E=void 0,EACH(R,o=>{g(o.path,o.callbackOrHandlers)}),R=void 0,EACH(m,o=>{G(o.path,o.callbackOrHandlers)}),m=void 0,EACH(P,o=>{y(o.path,o.callbackOrHandlers)}),P=void 0})}),D.connect({host:c,port:s,user:a,password:l,privateKey:d});e.disconnect=(()=>{D.end()})}}});