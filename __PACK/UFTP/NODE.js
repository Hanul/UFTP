UFTP.FTP=CLASS(o=>{let i=require("ftp"),n=require("path");return{init:(o,e,r,t)=>{let c,s,a=r.host,l=void 0===r.port?21:r.port,d=r.username,f=r.password;void 0!==t&&(c=t.error,s=t.success);let u=[],F=[],v=[],H=[],S=[],p=[],O=[],T=[],E=[],R=[],m=[],P=[],A=[],h=e.writeFile=((o,i)=>{u.push({params:o,callbackOrHandlers:i})}),_=e.readFile=((o,i)=>{F.push({path:o,callbackOrHandlers:i})}),C=e.getFileInfo=((o,i)=>{v.push({path:o,callbackOrHandlers:i})}),k=e.copyFile=((o,i)=>{H.push({params:o,callbackOrHandlers:i})}),W=e.moveFile=((o,i)=>{S.push({params:o,callbackOrHandlers:i})}),b=e.removeFile=((o,i)=>{p.push({path:o,callbackOrHandlers:i})}),I=e.checkFileExists=((o,i)=>{O.push({path:o,callback:i})}),N=e.createFolder=((o,i)=>{T.push({path:o,callbackOrHandlers:i})}),U=e.copyFolder=((o,i)=>{E.push({params:o,callbackOrHandlers:i})}),g=e.removeFolder=((o,i)=>{R.push({path:o,callbackOrHandlers:i})}),G=e.checkIsFolder=((o,i)=>{m.push({path:o,callbackOrHandlers:i})}),y=e.findFileNames=((o,i)=>{P.push({path:o,callbackOrHandlers:i})}),D=e.findFolderNames=((o,i)=>{A.push({path:o,callbackOrHandlers:i})}),x=new i;x.on("error",o=>{let i=o.toString();void 0!==c?c(i,r):SHOW_ERROR("UFTP.FTP",i,r)}),x.on("ready",()=>{void 0!==s&&s(),h=e.writeFile=((o,i)=>{let e=o.path,r=o.content,t=o.buffer;void 0!==r&&(t=Buffer.from(r,"utf8"));let c,s;void 0!==i&&(CHECK_IS_DATA(i)!==!0?s=i:(c=i.error,s=i.success));let a=n.dirname(e);N(a,{error:o=>{void 0!==c?c(o,a):SHOW_ERROR("UFTP.FTP/writeFile",o,a)},success:()=>{x.put(t,e,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==c?c(n,o):SHOW_ERROR("UFTP.FTP/writeFile",n,o)}else void 0!==s&&s()})}})}),_=e.readFile=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),I(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/readFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):x.get(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/readFile",n,o)}else{let i=[];n.on("data",o=>{i.push(o)}),n.on("end",()=>{r(Buffer.concat(i))}),n.on("error",i=>{let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/readFile",n,o)})}})})}),C=e.getFileInfo=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success));let t=o.substring(0,o.lastIndexOf("/")),c=o.substring(o.lastIndexOf("/")+1);x.list(t,(i,t)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/getFileInfo",n,o)}else{let i;EACH(t,o=>{o.name===c&&(i={lastUpdateTime:o.date},"d"!==o.type&&(i.size=o.size))}),void 0===i?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/getFileInfo",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):r(i)}})}),k=e.copyFile=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),_(t,{error:o=>{void 0!==e?e(o,t):SHOW_ERROR("UFTP.FTP/copyFile",o,t)},notExists:()=>{void 0!==n?n(t):SHOW_WARNING("UFTP.FTP/copyFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:t})},success:o=>{h({path:c,buffer:o},{error:o=>{void 0!==e?e(o,c):SHOW_ERROR("UFTP.FTP/copyFile",o,c)},success:r})}})}),W=e.moveFile=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),I(t,i=>{i!==!0?void 0!==n?n(t):SHOW_WARNING("UFTP.FTP/moveFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:t}):x.rename(t,c,i=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/moveFile",n,o)}else void 0!==r&&r()})})}),b=e.removeFile=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),I(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/removeFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):x.delete(o,i=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/removeFile",n,o)}else void 0!==r&&r()})})}),I=e.checkFileExists=((o,i)=>{if("."===o)i(!0);else{let n=o.substring(0,o.lastIndexOf("/")),e=o.substring(o.lastIndexOf("/")+1);x.list(n,(o,n)=>{let r=!1;void 0===o&&EACH(n,o=>{if(o.name===e)return r=!0,!1}),void 0!==i&&i(r)})}}),N=e.createFolder=((o,i)=>{let n,e;void 0!==i&&(CHECK_IS_DATA(i)!==!0?e=i:(n=i.error,e=i.success)),x.mkdir(o,!0,i=>{if(void 0!==i){let e=i.toString();void 0!==n?n(e,o):SHOW_ERROR("UFTP.FTP/createFolder",e,o)}else void 0!==e&&e()})}),U=e.copyFolder=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),I(t,i=>{i!==!0?void 0!==n?n(t):SHOW_WARNING("UFTP.FTP/copyFolder",MSG({ko:"폴더가 존재하지 않습니다."}),{from:t}):x.list(t,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/copyFolder",n,o)}else N(c,{error:e,success:()=>{NEXT(n,[(o,i)=>{"d"===o.type?U({from:t+"/"+o.name,to:c+"/"+o.name},{error:e,success:i}):k({from:t+"/"+o.name,to:c+"/"+o.name},{error:e,success:i})},()=>{return()=>{void 0!==r&&r()}}])}})})})}),g=e.removeFolder=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),I(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/removeFolder",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):x.rmdir(o,!0,i=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/removeFolder",n,o)}else void 0!==r&&r()})})}),G=e.checkIsFolder=((o,i)=>{let n,e;void 0!==i&&(CHECK_IS_DATA(i)!==!0?e=i:(n=i.error,e=i.success));let r=o.substring(0,o.lastIndexOf("/")),t=o.substring(o.lastIndexOf("/")+1);x.list(r,(o,i)=>{if(void 0!==o)e(!1);else{let o=!1;EACH(i,i=>{i.name===t&&(o="d"===i.type)}),e(o)}})}),y=e.findFileNames=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success));let t=[];I(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/findFileNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):x.list(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/findFileNames",n,o)}else EACH(n,o=>{"d"!==o.type&&t.push(o.name)}),void 0!==r&&r(t)})})}),D=e.findFolderNames=((o,i)=>{let n,e,r;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success));let t=[];I(o,i=>{i!==!0?void 0!==n?n(o):SHOW_WARNING("UFTP.FTP/findFolderNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):x.list(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==e?e(n,o):SHOW_ERROR("UFTP.FTP/findFolderNames",n,o)}else EACH(n,o=>{"d"===o.type&&t.push(o.name)}),void 0!==r&&r(t)})})}),EACH(u,o=>{h(o.params,o.callbackOrHandlers)}),u=void 0,EACH(F,o=>{_(o.path,o.callbackOrHandlers)}),F=void 0,EACH(v,o=>{C(o.path,o.callbackOrHandlers)}),v=void 0,EACH(H,o=>{k(o.params,o.callbackOrHandlers)}),H=void 0,EACH(S,o=>{W(o.params,o.callbackOrHandlers)}),S=void 0,EACH(p,o=>{b(o.path,o.callbackOrHandlers)}),p=void 0,EACH(O,o=>{I(o.path,o.callback)}),O=void 0,EACH(T,o=>{N(o.path,o.callbackOrHandlers)}),T=void 0,EACH(E,o=>{U(o.params,o.callbackOrHandlers)}),E=void 0,EACH(R,o=>{g(o.path,o.callbackOrHandlers)}),R=void 0,EACH(m,o=>{G(o.path,o.callbackOrHandlers)}),m=void 0,EACH(P,o=>{y(o.path,o.callbackOrHandlers)}),P=void 0,EACH(A,o=>{D(o.path,o.callbackOrHandlers)}),A=void 0}),x.connect({host:a,port:l,user:d,password:f});e.disconnect=(()=>{x.end()})}}}),UFTP.SFTP=CLASS(o=>{let i=require("ssh2").Client,n=require("path");return{init:(o,e,r,t)=>{let c,s,a=r.host,l=void 0===r.port?22:r.port,d=r.username,f=r.password,u=r.privateKey;void 0!==t&&(c=t.error,s=t.success);let F=[],v=[],H=[],S=[],p=[],O=[],T=[],E=[],R=[],m=[],P=[],A=[],h=[],_=e.writeFile=((o,i)=>{F.push({params:o,callbackOrHandlers:i})}),C=e.readFile=((o,i)=>{v.push({path:o,callbackOrHandlers:i})}),k=e.getFileInfo=((o,i)=>{H.push({path:o,callbackOrHandlers:i})}),W=e.copyFile=((o,i)=>{S.push({params:o,callbackOrHandlers:i})}),b=e.moveFile=((o,i)=>{p.push({params:o,callbackOrHandlers:i})}),I=e.removeFile=((o,i)=>{O.push({path:o,callbackOrHandlers:i})}),N=e.checkFileExists=((o,i)=>{T.push({path:o,callback:i})}),U=e.createFolder=((o,i)=>{E.push({path:o,callbackOrHandlers:i})}),g=e.copyFolder=((o,i)=>{R.push({params:o,callbackOrHandlers:i})}),G=e.removeFolder=((o,i)=>{m.push({path:o,callbackOrHandlers:i})}),y=e.checkIsFolder=((o,i)=>{P.push({path:o,callbackOrHandlers:i})}),D=e.findFileNames=((o,i)=>{A.push({path:o,callbackOrHandlers:i})}),x=e.findFolderNames=((o,i)=>{h.push({path:o,callbackOrHandlers:i})}),K=new i;K.on("error",o=>{let i=o.toString();void 0!==c?c(i,r):SHOW_ERROR("UFTP.FTP",i,r)}),K.on("ready",()=>{void 0!==s&&s(),K.sftp((o,i)=>{if(void 0!==o){let i=o.toString();void 0!==c?c(i,r):SHOW_ERROR("UFTP.SFTP",i,r)}else _=e.writeFile=((o,e)=>{let r=o.path,t=o.content,c=o.buffer;void 0!==t&&(c=Buffer.from(t,"utf8"));let s,a;void 0!==e&&(CHECK_IS_DATA(e)!==!0?a=e:(s=e.error,a=e.success));let l=n.dirname(r);U(l,{error:o=>{void 0!==s?s(o,l):SHOW_ERROR("UFTP.SFTP/writeFile",o,l)},success:()=>{i.open(r,"w",(o,n)=>{if(void 0!==o){let i=o.toString();void 0!==s?s(i,r):SHOW_ERROR("UFTP.SFTP/writeFile",i,r)}else{let o,e=c.byteLength,t=16384,l=0,d=(t,c)=>{if(void 0!==t){o=!0,i.close(n);let e=t.toString();void 0!==s?s(e,r):SHOW_ERROR("UFTP.SFTP/writeFile",e,r)}else c===e&&(void 0!==a&&a(),i.close(n))};if(0===e)i.write(n,c,0,0,0,d);else for(;l<e&&o!==!0;)l+t>e&&(t=e-l),i.write(n,c,l,t,l,d),l+=t}})}})}),C=e.readFile=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),N(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/readFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):i.open(o,"r",(n,e)=>{if(void 0!==n){let i=n.toString();void 0!==r?r(i,o):SHOW_ERROR("UFTP.SFTP/readFile",i,o)}else i.fstat(e,(n,c)=>{if(void 0!==n){let i=n.toString();void 0!==r?r(i,o):SHOW_ERROR("UFTP.SFTP/readFile",i,o)}else{let n,s=[],a=c.size,l=16384,d=new Buffer(a),f=0,u=0,F=(c,l,d)=>{if(void 0!==c){n=!0,i.close(e);let t=c.toString();void 0!==r?r(t,o):SHOW_ERROR("UFTP.SFTP/readFile",t,o)}else u+=l,s.push(d),u===a&&(t(Buffer.concat(s)),i.close(e))};if(0===a)t(Buffer.concat(s)),i.close(e);else for(;f<a&&n!==!0;)f+l>a&&(l=a-f),i.read(e,d,f,l,f,F),f+=l}})})})}),k=e.getFileInfo=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),i.stat(o,(i,n)=>{if(void 0!==i)void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/getFileInfo",MSG({ko:"파일이 존재하지 않습니다."}),{path:o});else{let o={lastUpdateTime:new Date(1e3*n.mtime)};n.isDirectory()!==!0&&(o.size=n.size),t(o)}})}),W=e.copyFile=((o,i)=>{let n,e,r,t=o.from,c=o.to;void 0!==i&&(CHECK_IS_DATA(i)!==!0?r=i:(n=i.notExists,e=i.error,r=i.success)),C(t,{error:o=>{void 0!==e?e(o,t):SHOW_ERROR("UFTP.SFTP/copyFile",o,t)},notExists:()=>{void 0!==n?n(t):SHOW_WARNING("UFTP.SFTP/copyFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:t})},success:o=>{_({path:c,buffer:o},{error:o=>{void 0!==e?e(o,c):SHOW_ERROR("UFTP.SFTP/copyFile",o,c)},success:r})}})}),b=e.moveFile=((o,n)=>{let e,r,t,c=o.from,s=o.to;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),N(c,n=>{n!==!0?void 0!==e?e(c):SHOW_WARNING("UFTP.SFTP/moveFile",MSG({ko:"파일이 존재하지 않습니다."}),{from:c}):i.rename(c,s,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/moveFile",n,o)}else void 0!==t&&t()})})}),I=e.removeFile=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),N(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/removeFile",MSG({ko:"파일이 존재하지 않습니다."}),{path:o}):i.unlink(o,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/removeFile",n,o)}else void 0!==t&&t()})})}),N=e.checkFileExists=((o,n)=>{i.stat(o,o=>{n(void 0===o)})}),U=e.createFolder=((o,e)=>{let r,t;void 0!==e&&(CHECK_IS_DATA(e)!==!0?t=e:(r=e.error,t=e.success)),N(o,e=>{if(e!==!0){let e=n.dirname(o);N(e,n=>{NEXT([o=>{n!==!0?U(e,o):o()},()=>{return()=>{i.mkdir(o,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/createFolder",n,o)}else void 0!==t&&t()})}}])})}else void 0!==t&&t()})}),g=e.copyFolder=((o,n)=>{let e,r,t,c=o.from,s=o.to;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),N(c,n=>{n!==!0?void 0!==e?e(c):SHOW_WARNING("UFTP.SFTP/copyFolder",MSG({ko:"폴더가 존재하지 않습니다."}),{from:c}):i.readdir(c,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/copyFolder",n,o)}else U(s,{error:r,success:()=>{NEXT(n,[(o,i)=>{o.attrs.isDirectory()===!0?g({from:c+"/"+o.filename,to:s+"/"+o.filename},{error:r,success:i}):W({from:c+"/"+o.filename,to:s+"/"+o.filename},{error:r,success:i})},()=>{return()=>{void 0!==t&&t()}}])}})})})}),G=e.removeFolder=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success)),N(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/removeFolder",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):i.readdir(o,(n,e)=>{if(void 0!==n){let i=n.toString();void 0!==r?r(i,o):SHOW_ERROR("UFTP.SFTP/removeFolder",i,o)}else NEXT(e,[(i,e)=>{i.attrs.isDirectory()===!0?G(o+"/"+i.filename,{error:n,success:e}):I(o+"/"+i.filename,{error:n,success:e})},()=>{return()=>{i.rmdir(o,i=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/removeFolder",n,o)}else void 0!==t&&t()})}}])})})}),y=e.checkIsFolder=((o,n)=>{let e,r;void 0!==n&&(CHECK_IS_DATA(n)!==!0?r=n:(e=n.error,r=n.success)),i.stat(o,(o,i)=>{r(void 0!==o?!1:i.isDirectory())})}),D=e.findFileNames=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success));let c=[];N(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/findFileNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):i.readdir(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/findFileNames",n,o)}else EACH(n,o=>{o.attrs.isDirectory()!==!0&&c.push(o.filename)}),void 0!==t&&t(c)})})}),x=e.findFolderNames=((o,n)=>{let e,r,t;void 0!==n&&(CHECK_IS_DATA(n)!==!0?t=n:(e=n.notExists,r=n.error,t=n.success));let c=[];N(o,n=>{n!==!0?void 0!==e?e(o):SHOW_WARNING("UFTP.SFTP/findFolderNames",MSG({ko:"폴더가 존재하지 않습니다."}),{path:o}):i.readdir(o,(i,n)=>{if(void 0!==i){let n=i.toString();void 0!==r?r(n,o):SHOW_ERROR("UFTP.SFTP/findFolderNames",n,o)}else EACH(n,o=>{o.attrs.isDirectory()===!0&&c.push(o.filename)}),void 0!==t&&t(c)})})}),EACH(F,o=>{_(o.params,o.callbackOrHandlers)}),F=void 0,EACH(v,o=>{C(o.path,o.callbackOrHandlers)}),v=void 0,EACH(H,o=>{k(o.path,o.callbackOrHandlers)}),H=void 0,EACH(S,o=>{W(o.params,o.callbackOrHandlers)}),S=void 0,EACH(p,o=>{b(o.params,o.callbackOrHandlers)}),p=void 0,EACH(O,o=>{I(o.path,o.callbackOrHandlers)}),O=void 0,EACH(T,o=>{N(o.path,o.callback)}),T=void 0,EACH(E,o=>{U(o.path,o.callbackOrHandlers)}),E=void 0,EACH(R,o=>{g(o.params,o.callbackOrHandlers)}),R=void 0,EACH(m,o=>{G(o.path,o.callbackOrHandlers)}),m=void 0,EACH(P,o=>{y(o.path,o.callbackOrHandlers)}),P=void 0,EACH(A,o=>{D(o.path,o.callbackOrHandlers)}),A=void 0,EACH(h,o=>{x(o.path,o.callbackOrHandlers)}),h=void 0})}),K.connect({host:a,port:l,user:d,password:f,privateKey:u});e.disconnect=(()=>{K.end()})}}});